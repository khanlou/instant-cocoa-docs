<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8">

		<script src="//use.typekit.net/sec7fxd.js"></script>
		<script>try{Typekit.load();}catch(e){}</script>
    	
	    <script>
	      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	      ga('create', 'UA-61265657-1', 'auto');
	      ga('send', 'pageview');

	    </script>
	    <link href="../../styles.css" rel="stylesheet">
		<title>Router - Instant Cocoa</title>
	</head>
	<body class="docs">
		<div id="container">
			<div id="header">
				<div id="header-inner">
					<a href="/">
						<img id="ic-logo" src="/images/logo-ic-small.png">
						<h1>Instant Cocoa</h1>
					</a>
				</div>
			</div>
			<div id="content" class="clearfix">
			<div id="docs-menu">
				<h2>Contents</h2>
<ul id="docs-menu">
	<li><a href="http://instantcocoa.io/docs">Overview</a></li>
    
		
	        <li>Core</li>
		
		<ul>
        
            <li class="toctree-l2 ">
                <a class="" href="../inflector">Inflector</a>
			</li>
        
            <li class="toctree-l2 current">
                <a class="current" href=".">Router</a>
			</li>
        
		</ul>
    
		
	        <li><a href="../../instant-model">Instant Model</a></li>
		
		<ul>
        
            <li class="toctree-l2 ">
                <a class="" href="../../instant-model/collection-fetcher">Collection Fetcher</a>
			</li>
        
            <li class="toctree-l2 ">
                <a class="" href="../../instant-model/mapping">Mapping</a>
			</li>
        
            <li class="toctree-l2 ">
                <a class="" href="../../instant-model/protocols">Protocols</a>
			</li>
        
            <li class="toctree-l2 ">
                <a class="" href="../../instant-model/reflection">Reflection</a>
			</li>
        
            <li class="toctree-l2 ">
                <a class="" href="../../instant-model/resource-gateway">Resource Gateway</a>
			</li>
        
            <li class="toctree-l2 ">
                <a class="" href="../../instant-model/serializers">Serializers</a>
			</li>
        
            <li class="toctree-l2 ">
                <a class="" href="../../instant-model/value-objects">Value Objects</a>
			</li>
        
		</ul>
    
</ul>

			</div>
			<div id="docs-content">
				<h2 id="instant-router">Instant Router</h2>
<p>Instant Cocoa's Router allows you to easily map a URL or path to a specific view controller or set of view controllers.</p>
<p>Setting up the router requires creating <code>ICRoute</code> objects, and registering them with the <code>ICRouter</code> singleton. </p>
<h3 id="the-routes">The Routes</h3>
<p>Route information is stored in objects of type <code>ICRoute</code>. Routes have a "matcher" and information about how to present view controllers. A typically route can is initialized like so:</p>
<pre><code>id&lt;ICRouteMatcher&gt; matcher = [[ICSimpleRouteMatcher alloc] initWithPath:@"users/{user_id}"];
ICRoute *route = [[ICRoute alloc] initWithMatcher:matcher];
</code></pre>
<p>A convenience method is provided for using simple route matching, and can be used like so:</p>
<pre><code>ICRoute *route = [ICRoute routeWithPath:@"users/{user_id}"];
</code></pre>
<p>Other matchers can be created by conforming to the <code>ICRouteMatcher</code> protocol, which involves implmenting two methods:</p>
<pre><code>- (BOOL)canHandlePath:(NSString*)incomingPath;
- (NSDictionary*)parametersForPath:(NSString*)incomingPath;
</code></pre>
<p>Once a route is created, the route object can store additional information about how to present the route.</p>
<ul>
<li><code>viewControllerClass</code>: The class that the router will alloc and init with the routing parameters from the matcher. View Controllers to be presented should conform to the <code>&lt;ICRoutable&gt;</code> protocol explicitly.</li>
<li><code>shouldPopToRoot</code>: Whether or not the navigation controller should pop to root before presenting this route.</li>
<li><code>navigationControllerKey</code>: An <code>NSString</code> that you can use to show the correct tab in a tab bar applciation.</li>
<li><code>dependencies</code>: An <code>NSArray</code> of other, dependent routes that should be executed before executing this route. Use this for nested resources.</li>
</ul>
<p>When a route is ready, register it with <code>ICRouter</code>.</p>
<h3 id="the-router">The Router</h3>
<p>The <code>ICRouter</code> class holds on to the routes and allows you to handle URLs opaquely.</p>
<p>Creating a router allows you to:</p>
<p>Register a new <code>ICRoute</code> with:</p>
<pre><code>- (void)registerRoute:(ICRoute*)route;
</code></pre>
<p>Check if a route can be handled with:</p>
<pre><code>- (BOOL)canHandleURL:(NSURL*)url;
</code></pre>
<p>Navigate to a route with:</p>
<pre><code>- (BOOL)handleURL:(NSURL*)url;
</code></pre>
<p>Navigating to a route involves three steps:</p>
<ol>
<li>Fetching all the parameters from the route matcher.</li>
<li>Navigating to all the routes dependencies.</li>
<li>Navigating to the route itself.</li>
</ol>
<p>Navigating to an individual route involves:</p>
<ol>
<li>Showing the correct tab (if needed).</li>
<li>Allocating a new view controller, and calling <code>-initWithRoutingInfo:</code> on it (if it conforms to ICRoutable) or <code>-init</code> (if it doesn't).</li>
<li>Popping to root if required and not a dependency.</li>
<li>Presenting the view controller.</li>
</ol>
<p>These steps can be overriden with the router's delegate. The <code>ICRouterDelegate</code> protocol provides methods the following methods:</p>
<pre><code>- (UIViewController*)showViewControllerWithKey:(NSString*)viewControllerKey;
- (void)viewController:(UIViewController*)viewController requiresPopToRootForRoute:(ICRoute*)route;
- (void) presentViewController:(UIViewController*)viewControllerToPresent forRoute:(ICRoute*)route fromViewController:(UIViewController*)fromViewController;
</code></pre>
<p>They will be called <em>instead of</em> the default behavior, if they are implemented.</p>

			</div>
		</div>
		<div id="footer">
			<div id="footer-inner">
				<a href="/">Instant Cocoa</a> &middot; MIT Licensed &middot; by Soroush Khanlou
			</div>
		</div>
	</body>
</html>